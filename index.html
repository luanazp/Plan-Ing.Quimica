<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Interactiva - Ingeniería Química</title>
  <style>
    :root {
      --aprobada: #a8dadc;
      --habilitada: #f1faee;
      --bloqueada: #ccc;
      --titulo: #1d3557;
      --modulo: #457b9d;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa;
      color: #1d3557;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 2rem;
    }
    .anio {
      margin-bottom: 2rem;
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .anio h2 {
      margin-bottom: 1rem;
      color: var(--titulo);
    }
    .modulo {
      margin-bottom: 1rem;
    }
    .modulo h3 {
      background: var(--modulo);
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 8px 8px 0 0;
      margin: 0;
    }
    .materias {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 1rem;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 0 0 8px 8px;
    }
    .materia {
      padding: 0.5rem 1rem;
      border-radius: 8px;
      background-color: var(--bloqueada);
      cursor: pointer;
      transition: 0.3s;
    }
    .materia.habilitada {
      background-color: var(--habilitada);
      border: 1px solid #aaa;
    }
    .materia.aprobada {
      background-color: var(--aprobada);
      text-decoration: line-through;
    }
    #exigencias {
      background: #e9ecef;
      padding: 1rem;
      margin-top: 2rem;
      border-left: 5px solid #6c757d;
      border-radius: 8px;
    }
    .contador {
      text-align: center;
      margin-top: 2rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Ingeniería Química</h1>

  <div id="malla"></div>
  <div class="contador" id="contador"></div>

  <div id="exigencias">
    <h3>Exigencias adicionales</h3>
    <ul>
      <li>Suficiencia de idioma (Inglés)</li>
      <li>Prácticas de Fábrica</li>
    </ul>
  </div>

  <script>
    const materias = {
      "1° Año": {
        "Módulo 1": ["Cálculo I", "Álgebra y Geometría Analítica", "Sistemas de Representación", "Física I"],
        "Módulo 2": ["Elementos de Álgebra Lineal", "Cálculo II", "Física II", "Fundamentos de Química General", "Informática"]
      },
      "2° Año": {
        "Módulo 3": ["Cálculo III", "Física III", "Química General e Inorgánica"],
        "Módulo 4": ["Cálculo IV", "Probabilidad y Estadística", "Química Analítica I", "Química Orgánica I"]
      },
      "3° Año": {
        "Módulo 5": ["Química Analítica II", "Química Orgánica II", "Introducción a la Ingeniería Química", "Termodinámica de Procesos"],
        "Módulo 6": ["Electrotecnia y Máquinas Eléctricas", "Fisicoquímica", "Balances de Materia y Energía", "Fenómenos de Transporte"]
      },
      "4° Año": {
        "Módulo 7": ["Microbiología General e Industrial", "Operaciones Unitarias I", "Análisis y Diseño de Reactores I", "Economía y Organización Industrial"],
        "Módulo 8": ["Análisis y Diseño de Reactores II", "Operaciones Unitarias II", "Ingeniería Legal", "Mecánica Aplicada"]
      },
      "5° Año": {
        "Módulo 9": ["Operaciones Unitarias III", "Control de Procesos", "Formulación y Evaluación de Proyectos"],
        "Módulo 10": ["Ingeniería Ambiental e Higiene y Seguridad del Trabajo", "Diseño y Optimización de Procesos", "Tecnología de los Procesos Industriales en Escala Piloto"]
      }
    };

    const correlativas = {
      "4° Año": ["Suficiencia de idioma (Inglés)"]
    };

    const aprobadas = JSON.parse(localStorage.getItem("aprobadas") || "[]");

    function crearMalla() {
      let total = 0;
      let container = document.getElementById("malla");
      for (const [anio, modulos] of Object.entries(materias)) {
        let anioDiv = document.createElement("div");
        anioDiv.className = "anio";
        anioDiv.innerHTML = `<h2>${anio}</h2>`;
        for (const [modulo, list] of Object.entries(modulos)) {
          let moduloDiv = document.createElement("div");
          moduloDiv.className = "modulo";
          moduloDiv.innerHTML = `<h3>${modulo}</h3>`;
          let matDiv = document.createElement("div");
          matDiv.className = "materias";
          list.forEach(materia => {
            total++;
            let div = document.createElement("div");
            div.className = "materia";
            div.textContent = materia;
            if (aprobadas.includes(materia)) {
              div.classList.add("aprobada");
            } else {
              div.classList.add("habilitada");
            }
            div.addEventListener("click", () => toggleMateria(div, materia));
            matDiv.appendChild(div);
          });
          moduloDiv.appendChild(matDiv);
          anioDiv.appendChild(moduloDiv);
        }
        container.appendChild(anioDiv);
      }
      actualizarContador();
    }

    function toggleMateria(element, materia) {
      if (aprobadas.includes(materia)) {
        aprobadas.splice(aprobadas.indexOf(materia), 1);
        element.classList.remove("aprobada");
      } else {
        aprobadas.push(materia);
        element.classList.add("aprobada");
      }
      localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
      actualizarContador();
    }

    function actualizarContador() {
      document.getElementById("contador").textContent = `Materias aprobadas: ${aprobadas.length}`;
    }

    crearMalla();
  </script>
</body>
</html>
